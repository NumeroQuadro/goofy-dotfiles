# Shared tmux config
# Prefer tmux-256color but fall back when the terminfo entry is missing
# (a common source of broken mouse/clipboard behavior on remote hosts).
if-shell 'infocmp -x tmux-256color >/dev/null 2>&1' \
  'set -g default-terminal "tmux-256color"' \
  'set -g default-terminal "screen-256color"'
set -as terminal-overrides ",xterm-kitty:RGB:Ms=\E]52;c;%p1%s\007"

set -g mouse on
set -g history-limit 10000
set -g status-keys vi
set -g mode-keys vi
set -g set-clipboard on

# Copy selection on mouse release (uses OSC52 when set-clipboard is on)
bind -T copy-mode-vi MouseDragEnd1Pane send -X copy-selection-and-cancel
bind -T copy-mode MouseDragEnd1Pane send -X copy-selection-and-cancel

# Smooth mouse wheel scrolling (enters copy-mode on scroll up)
bind -n WheelUpPane if -F '#{mouse_any_flag}' 'send -M' 'copy-mode -e; send-keys -X scroll-up'
bind -n WheelDownPane if -F '#{mouse_any_flag}' 'send -M' 'if -F "#{pane_in_mode}" "send-keys -X scroll-down" "send -M"'

bind-key K send-keys C-l \; clear-history
bind-key -n C-l send-keys C-l \; clear-history
